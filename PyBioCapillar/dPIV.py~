import openpiv.tools
import openpiv.process
import openpiv.scaling
import tifffile
import numpy as np
DeltaT=1.5##h
Data=tifffile.imread('TempSlice800.tif')
for kat in np.arange(Data.shape[0]-1):
    frame_a=Data[kat,:,:]
    frame_b=Data[kat+1,:,:]
    u, v, sig2noise = openpiv.process.extended_search_area_piv( frame_a, frame_b, window_size=24, overlap=12, dt=DeltaT, search_area_size=64, sig2noise_method='peak2peak' )
    x, y = openpiv.process.get_coordinates( image_size=frame_a.shape, window_size=24, overlap=12 )
    

u, v, mask = openpiv.validation.sig2noise_val( u, v, sig2noise, threshold = 1.3 )


